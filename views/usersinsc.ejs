<!-- include header -->
<%- include('include/_header') %>
    <!-- /include header -->

    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
            integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
            crossorigin="anonymous" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
            rel="stylesheet">
        <link rel="stylesheet" href="../css/style.css">
    </head>
    <!-- Main Site -->
    <div id="users_insc">
        <div class="torneio">
            <div class="titulo">
                <%for(tournment of Tournament){%>
                    <h1>Torneio <%=tournment.nometorneio%>
                    </h1>
                    <%}%>
                        <!--fazer push do nome db-->
            </div>
            <div class="content">
                <div class="imagem_torneio">
                    <%for(tournment of Tournament){%>
                        <img src="/img/img_Torneios/<%=tournment.img%>">
                        <%}%>
                            <!--fazer push do nome db-->
                </div>
                <div class="infos">
                    <div class="local">
                        <div class="numero">
                            <p>1</p>
                        </div>
                        <div class="texto">
                            <h1>Localização</h1>
                            <%for(tournment of Tournament){%>
                                <p>Campo de padle da <%=tournment.localizacao%>
                                </p>
                                <%}%>
                        </div>
                    </div>
                    <div class="tipo_torneio">
                        <div class="numero">
                            <p>2</p>
                        </div>
                        <div class="texto">
                            <h1>Tipo de Torneio</h1>
                            <%for(tournment of Tournament){%>
                                <p>
                                    <%=tournment.niveltipo%>
                                </p>
                                <%}%>
                        </div>


                    </div>
                    <div class="preco">
                        <div class="numero">
                            <p>3</p>
                        </div>
                        <div class="texto">
                            <h1>Preço</h1>
                            <%for(tournment of Tournament){%>
                                <p>
                                    <%=tournment.preco%> raquetes
                                </p>
                                <%}%>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="formulario">
            <div class="titulo_form">
                <h1>Inscrição do Torneio</h1>
            </div>
            <form method="POST" onsubmit="save_data()">
                <input type="hidden" name="avail" value="">
                <div class="jgd1">
                    <h2>Jogador 1</h2>
                    <br>
                    <br>
                    <p>Primeiro nome:</p><br>
                    <input type="text" id="name1" name="nameum">
                    <br>
                    <br>
                    <p>NIF:</p><br>
                    <input type="text" maxlength="9" id="nifum" name="nifum">
                    <br>
                    <br>
                    <p>Data de Nascimento:</p><br>
                    <input type="date" id="BirthDateum" name="BirthDateum">
                    <br>
                    <br>
                    <p>Email:</p><br>
                    <input type="text" id="emailum" name="emailum">
                    <br>
                    <br>
                    <p>Telemóvel:</p><br>
                    <input type="text" maxlength="9" id="telum" name="telum">
                    <br>
                    <br>
                </div>
                <div class="jgd2">
                    <h2>Jogador 2</h2>
                    <br>
                    <br>
                    <p>Primeiro nome:</p><br>
                    <input type="text" id="namedois" name="namedois">
                    <br>
                    <br>
                    <p>NIF:</p><br>
                    <input type="text" maxlength="9" id="nifdois" name="nifdois">
                    <br>
                    <br>
                    <p>Data de Nascimento:</p><br>
                    <input type="date" id="BirthDatedois" name="BirthDatedois">
                    <br>
                    <br>
                    <p>Email:</p><br>
                    <input type="text" id="emaildois" name="emaildois">
                    <br>
                    <br>
                    <p>Telemóvel:</p><br>
                    <input type="text" maxlength="9" id="teldois" name="teldois">
                    <br>
                    <br>
                </div>
                <label for="playerslevel">Selecione o seu nível:</label><br>
                <select name="level" id="level">
                    <option></option>
                    <%for(nivel of niveis){%>
                    <option value="<%=nivel%>"><%=nivel%></option>
                    <%}%>
                </select>
                <br>
                <br>

                <div class="Disponibilidade">
                    <h1>Indisponibilidade Horária</h1>
                    <p>Marque a Indisponiblidade horária da Dupla para a realização dos jogos!</p>
                    <br>
                    <br>
                    <br>
                    <br>
                    <table class="table" id="table">
                        <tr>
                            <th></th>
                            <th>Segunda-feira</th>
                            <th>Terça-feira</th>
                            <th>Quarta-feira</th>
                            <th>Quinta-feira</th>
                            <th>Sexta-feira</th>
                            <th>Sábado</th>
                            <th>Domingo</th>
                        </tr>
                        <tr>
                            <td class="hora_tabela">09:00</td>
                            <td onclick="add_item('segunda','9')"></td>
                            <td onclick="add_item('terca','9')"></td>
                            <td onclick="add_item('quarta','9')"></td>
                            <td onclick="add_item('quinta','9')"></td>
                            <td onclick="add_item('sexta','9')"></td>
                            <td onclick="add_item('sabado','9')"></td>
                            <td onclick="add_item('domingo','9')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">10:00</td>
                            <td onclick="add_item('segunda','10')"></td>
                            <td onclick="add_item('terca','10')"></td>
                            <td onclick="add_item('quarta','10')"></td>
                            <td onclick="add_item('quinta','10')"></td>
                            <td onclick="add_item('sexta','10')"></td>
                            <td onclick="add_item('sabado','10')"></td>
                            <td onclick="add_item('domingo','10')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">11:00</td>
                            <td onclick="add_item('segunda','11')"></td>
                            <td onclick="add_item('terca','11')"></td>
                            <td onclick="add_item('quarta','11')"></td>
                            <td onclick="add_item('quinta','11')"></td>
                            <td onclick="add_item('sexta','11')"></td>
                            <td onclick="add_item('sabado','11')"></td>
                            <td onclick="add_item('domingo','11')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">12:00</td>
                            <td onclick="add_item('segunda','12')"></td>
                            <td onclick="add_item('terca','12')"></td>
                            <td onclick="add_item('quarta','12')"></td>
                            <td onclick="add_item('quinta','12')"></td>
                            <td onclick="add_item('sexta','12')"></td>
                            <td onclick="add_item('sabado','12')"></td>
                            <td onclick="add_item('domingo','12')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">13:00</td>
                            <td onclick="add_item('segunda','13')"></td>
                            <td onclick="add_item('terca','13')"></td>
                            <td onclick="add_item('quarta','13')"></td>
                            <td onclick="add_item('quinta','13')"></td>
                            <td onclick="add_item('sexta','13')"></td>
                            <td onclick="add_item('sabado','13')"></td>
                            <td onclick="add_item('domingo','13')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">14:00</td>
                            <td onclick="add_item('segunda','14')"></td>
                            <td onclick="add_item('terca','14')"></td>
                            <td onclick="add_item('quarta','14')"></td>
                            <td onclick="add_item('quinta','14')"></td>
                            <td onclick="add_item('sexta','14')"></td>
                            <td onclick="add_item('sabado','14')"></td>
                            <td onclick="add_item('domingo','14')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">15:00</td>
                            <td onclick="add_item('segunda','15')"></td>
                            <td onclick="add_item('terca','15')"></td>
                            <td onclick="add_item('quarta','15')"></td>
                            <td onclick="add_item('quinta','15')"></td>
                            <td onclick="add_item('sexta','15')"></td>
                            <td onclick="add_item('sabado','15')"></td>
                            <td onclick="add_item('domingo','15')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">16:00</td>
                            <td onclick="add_item('segunda','16')"></td>
                            <td onclick="add_item('terca','16')"></td>
                            <td onclick="add_item('quarta','16')"></td>
                            <td onclick="add_item('quinta','16')"></td>
                            <td onclick="add_item('sexta','16')"></td>
                            <td onclick="add_item('sabado','16')"></td>
                            <td onclick="add_item('domingo','16')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">17:00</td>
                            <td onclick="add_item('segunda','17')"></td>
                            <td onclick="add_item('terca','17')"></td>
                            <td onclick="add_item('quarta','17')"></td>
                            <td onclick="add_item('quinta','17')"></td>
                            <td onclick="add_item('sexta','17')"></td>
                            <td onclick="add_item('sabado','17')"></td>
                            <td onclick="add_item('domingo','17')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">18:00</td>
                            <td onclick="add_item('segunda','18')"></td>
                            <td onclick="add_item('terca',  '18')"></td>
                            <td onclick="add_item('quarta', '18')"></td>
                            <td onclick="add_item('quinta', '18')"></td>
                            <td onclick="add_item('sexta',  '18')"></td>
                            <td onclick="add_item('sabado', '18')"></td>
                            <td onclick="add_item('domingo','18')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">19:00</td>
                            <td onclick="add_item('segunda','19')"></td>
                            <td onclick="add_item('terca',  '19')"></td>
                            <td onclick="add_item('quarta', '19')"></td>
                            <td onclick="add_item('quinta', '19')"></td>
                            <td onclick="add_item('sexta',  '19')"></td>
                            <td onclick="add_item('sabado', '19')"></td>
                            <td onclick="add_item('domingo','19')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">20:00</td>
                            <td onclick="add_item('segunda','20')"></td>
                            <td onclick="add_item('terca',  '20')"></td>
                            <td onclick="add_item('quarta', '20')"></td>
                            <td onclick="add_item('quinta', '20')"></td>
                            <td onclick="add_item('sexta',  '20')"></td>
                            <td onclick="add_item('sabado', '20')"></td>
                            <td onclick="add_item('domingo','20')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">21:00</td>
                            <td onclick="add_item('segunda','21')"></td>
                            <td onclick="add_item('terca',  '21')"></td>
                            <td onclick="add_item('quarta', '21')"></td>
                            <td onclick="add_item('quinta', '21')"></td>
                            <td onclick="add_item('sexta',  '21')"></td>
                            <td onclick="add_item('sabado', '21')"></td>
                            <td onclick="add_item('domingo','21')"></td>
                        </tr>
                        <tr>
                            <td class="hora_tabela">22:00</td>
                            <td onclick="add_item('segunda','22')"></td>
                            <td onclick="add_item('terca',  '22')"></td>
                            <td onclick="add_item('quarta', '22')"></td>
                            <td onclick="add_item('quinta', '22')"></td>
                            <td onclick="add_item('sexta',  '22')"></td>
                            <td onclick="add_item('sabado', '22')"></td>
                            <td onclick="add_item('domingo','22')"></td>
                        </tr>


                    </table>
                    <button type="submit" class="enviar">
                        Finalizar Inscrição
                    </button>
                    <script>
                        //let horas=[];
                        //let flag=true
                        /*let horas= [];
                        function add_item(dia,hora) {
                            //while (!flag){}
                            //flag = false;
                            let index=horas.indexOf(dia.concat(hora))
                            if (index!== -1){
                                //horas.splice(index)
                                let aux = horas.subarray(index, horas.length);
                                console.log("aux")
                                horas=horas.subarray(0, index)

                            }else{
                                horas.push(dia.concat(hora))
                            }*/
                            let horas = "";
                            let aux="";

                            function add_item(dia,hora) {
                            let input=dia.concat(hora,',')
                                console.log(input)
                            if (horas.includes(input)) {
                                horas=horas.split(input).join('')
                            }else{
                                horas=horas.concat(input)
                            }

                            console.log(dia,hora,horas);
                            //flag=true
                        };
                        function save_data(){
                            document.getElementsByName("avail")[0].setAttribute("value", horas);

                        }
                        /*var table = document.getElementById('table');
                        var hora;
                        var dia;
                        for (var i = 1; i < table.rows.length; i++) {


                            table.rows[i].onclick = function () {


                                //rIndex = this.rowIndex;
                                hora = this.cells[0].innerHTML;
                                console.log(hora);



                            };
                        }
                         for (var j = 1; j < 7; j++) {
                             table.rows[0].cells[j].onclick = function () {
                                 console.log(this.rows[0].innerHTML);
                             };
                         }*/



                        var count = 0;

                        $('table').on('click', 'td', function () {
                            count++;
                            if (count == 1) {
                                if ($(this).css("background-color") == "rgb(128, 30, 6)") {/*verifica se esta verde*/
                                    $(this).addClass('active');
                                }
                                else {
                                    $(this).removeClass('active');
                                }
                            }

                            if (count == 2) {
                                if ($(this).css("background-color") == "rgb(128, 30, 6)") {
                                    $(this).addClass('active');
                                }
                                else {
                                    $(this).removeClass('active');
                                }
                                count = 0;

                            }
                        });




                    </script>
                </div>


            </form>
        </div>




    </div>

    </html>
    <!-- /Main Site -->


    <!-- include footer -->
    <%- include('include/_footer') %>
        <!-- /include footer -->